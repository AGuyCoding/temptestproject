name: Generate sitemap
on:
  push:
    branches: [ main ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Generate sitemap
        run: |
          pip install sitemapgen4
          python - <<'PY'
          import sitemapgen4 as sm
          gen = sm.SitemapGen(
            base_url="https://AGuyCoding.github.io/temptestproject",  # oder Custom Domain
            output_path="sitemap.xml",
            include_html=True
          )
          gen.run()
          PY
      - name: Commit sitemap
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add sitemap.xml
          git commit -m "Add/update sitemap" || echo "No changes"
          git push
